{"version":3,"sources":["TargetBox.js","Container.js","browser/Image.js","browser/ImageBrowser.js","Sidebar.js","engine/BinaryReader.js","engine/parseInd15.js","engine/parseInd13.js","engine/parseDat.js","App.js","serviceWorker.js","index.js"],"names":["TargetBox_TargetBox","this","props","isDragging","connectDropTarget","react_default","a","createElement","className","classnames_default","dropBox--dropping","isOver","canDrop","Component","src_TargetBox","Object","lib","react_dnd_html5_backend_lib","FILE","drop","monitor","component","onDrop","connect","dropTarget","getItemType","Container_Container","handleFileDrop","item","files","getItem","images","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","file","value","type","startsWith","blob","URL","createObjectURL","push","x","y","w","h","filename","name","index","replace","endsWith","_this","onInd","onDat","err","return","length","onImages","backend","react_dnd_html5_backend_lib_default","Fragment","src_Container","browser_Image","state","source","deferSource","setState","style","_objectSpread","margin","href","target","width","height","src","alt","PureComponent","ImageBrowser_ImageBrowser","CELL_WIDTH","CELL_HEIGHT","cols","rows","cellRenderer","_ref","key","columnIndex","rowIndex","isScrolling","isVisible","i","img","assign","onRender","_this2","children","AutoSizer","_ref2","Math","floor","ceil","Grid","concat","columnCount","columnWidth","rowCount","rowHeight","src_Sidebar","NavLink","to","BinaryReader","arrayBuffer","BinaryReader_classCallCheck","endian","offset","read32","ret","dv","getInt32","read16","getInt16","read8","getInt8","read32float","getFloat32","readString","buf","buffer","slice","String","fromCharCode","apply","Uint8Array","isEOF","byteLength","DataView","parseInd15","bin","br","grhs","grh","numFrames","frames","speed","fileNum","frame","parseInd13","Array","forEach","frame0grh","missing","console","warn","parseDat","dat","entries","ini_default","parse","filter","_slicedToArray","Name","reduce","acc","_ref3","_ref4","parseDat_objectSpread","parseDat_defineProperty","src_App","App","App_classCallCheck","App_possibleConstructorReturn","App_getPrototypeOf","call","filteredImages","filteredGrhs","objs","filteredObjs","imageElements","search","canvas","document","ctx","getContext","notFoundImage","notFoundGrh","cachedGrhs","cachedImageElements","cachedDats","handleImages","droppedImages","merged","App_objectSpread","cur","App_defineProperty","values","handleInd","droppedInd","reader","FileReader","onload","result","e","error","map","readAsArrayBuffer","handleDat","droppedDat","App_slicedToArray","find","GrhIndex","substr","readAsText","drawGrhOnImage","imageElement","Promise","resolve","reject","clearRect","drawImage","toBlob","blobUrl","clone","onRenderGrh","grhRenderedIndex","cachedGrh","App_asyncToGenerator","regenerator_default","mark","_callee3","bitmap","_imageElement","handleRendered","wrap","_context3","prev","Image","_callee","_context","sent","stop","complete","_ref5","_callee2","_context2","removeEventListener","arguments","addEventListener","_x","onRenderObj","objRenderedIndex","cachedDat","_ref6","toString","handleChangeSearch","ev","fillStyle","fillRect","textBaseline","textAlign","fillText","body","appendChild","prevProps","prevState","toUpperCase","includes","_this3","HashRouter","Route","exact","path","Redirect","placeholder","onChange","Switch","render","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","controller","log","onUpdate","onSuccess","catch","react_dom_default","getElementById","origin","fetch","response","status","headers","get","indexOf","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.0d70c7d2.chunk.js","sourcesContent":["import React from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport {DropTarget} from \"react-dnd\";\r\nimport {NativeTypes} from \"react-dnd-html5-backend\";\r\nimport classNames from 'classnames';\r\n\r\nclass TargetBox extends React.Component {\r\n\r\n    static propTypes = {\r\n        onDrop: PropTypes.func,\r\n    };\r\n\r\n    render() {\r\n        if (!this.props.isDragging) return null;\r\n        return this.props.connectDropTarget(<div className={classNames(\r\n            'dropBox',\r\n            {'dropBox--dropping': this.props.isOver && this.props.canDrop},\r\n        )}>Arrastra aca!</div>);\r\n    }\r\n}\r\n\r\n\r\nconst spec = {\r\n    drop(props, monitor, component) {\r\n        props.onDrop && props.onDrop(props, monitor);\r\n    }\r\n};\r\n\r\nfunction collect(connect, monitor) {\r\n    return {\r\n        connectDropTarget: connect.dropTarget(),\r\n        isOver: monitor.isOver(),\r\n        canDrop: monitor.canDrop(),\r\n        isDragging: monitor.getItemType() === NativeTypes.FILE\r\n    }\r\n}\r\n\r\nexport default DropTarget(NativeTypes.FILE, spec, collect)(TargetBox);\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {DragDropContext, DragDropContextProvider,} from 'react-dnd';\r\nimport HTML5Backend from 'react-dnd-html5-backend';\r\nimport TargetBox from './TargetBox';\r\n\r\nclass Container extends React.Component {\r\n\r\n    static propTypes = {\r\n        onImages: PropTypes.func.isRequired,\r\n        onInd: PropTypes.func.isRequired,\r\n        onDat: PropTypes.func.isRequired,\r\n    };\r\n\r\n    handleFileDrop = (item, monitor) => {\r\n        if (monitor) {\r\n            const files = monitor.getItem().files;\r\n            const images = [];\r\n            for (const file of files) {\r\n                if (file.type.startsWith(\"image/\")) {\r\n                    const blob = URL.createObjectURL(file);\r\n                    images.push({\r\n                        blob,\r\n                        x: 0,\r\n                        y: 0,\r\n                        w: 64,\r\n                        h: 64,\r\n                        filename: file.name,\r\n                        index: +file.name.replace(/\\.[^/.]+$/, \"\"), // remove extension https://stackoverflow.com/a/4250408\r\n                    });\r\n                } else if (file.name.endsWith(\".ind\")) {\r\n                    if (file.name === \"Graficos.ind\") {\r\n                        this.props.onInd(file);\r\n                    }\r\n                } else if (file.name.endsWith(\".dat\")) {\r\n                    if (file.name === \"OBJ.dat\") {\r\n                        this.props.onDat(file);\r\n                    }\r\n                }\r\n            }\r\n            images.length && this.props.onImages(images);\r\n        }\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <DragDropContextProvider backend={HTML5Backend}>\r\n                <React.Fragment>\r\n                    <TargetBox onDrop={this.handleFileDrop}/>\r\n                </React.Fragment>\r\n            </DragDropContextProvider>\r\n        )\r\n    }\r\n\r\n}\r\n\r\nexport default DragDropContext(HTML5Backend)(Container);","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nclass Image extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        blob: PropTypes.string.isRequired,\r\n        deferSource: PropTypes.func,\r\n        // i: PropTypes.number,\r\n        w: PropTypes.number,\r\n        h: PropTypes.number,\r\n        index: PropTypes.number,\r\n        filename: PropTypes.string,\r\n    };\r\n\r\n    state = {\r\n        source: this.props.blob,\r\n    };\r\n\r\n    async componentDidMount() {\r\n        if (!this.props.deferSource) return;\r\n        this.setState({source: await this.props.deferSource(this.props.index)});\r\n    }\r\n\r\n    render() {\r\n        return this.state.source && (\r\n            <figure style={{...this.props.style, ...{margin: 0}}}>\r\n                <a href={this.state.source} target=\"_blank\"><img width={64} height={64} src={this.state.source} alt={this.props.filename}/></a>\r\n                <figcaption>{this.props.filename}</figcaption>\r\n            </figure>\r\n        ) || null;\r\n    }\r\n}\r\n\r\n\r\nexport default Image;","import React from \"react\";\r\nimport PropTypes from 'prop-types';\r\nimport Image from \"./Image\";\r\nimport AutoSizer from \"react-virtualized/dist/es/AutoSizer/AutoSizer\";\r\nimport Grid from \"react-virtualized/dist/es/Grid/Grid\";\r\n\r\nexport default class ImageBrowser extends React.PureComponent {\r\n\r\n    static propTypes = {\r\n        images: PropTypes.arrayOf(PropTypes.shape(Image.propTypes)).isRequired,\r\n        onRender: PropTypes.func,\r\n    };\r\n\r\n    CELL_WIDTH = 144;\r\n    CELL_HEIGHT = 100;\r\n    cols = 0;\r\n    rows = 0;\r\n\r\n    cellRenderer = ({\r\n                              key,         // Unique key within array of rows\r\n                              columnIndex, // Index of row within collection\r\n                              rowIndex,    // Index of row within collection\r\n                              isScrolling, // The List is currently being scrolled\r\n                              isVisible,   // This row is visible within the List (eg it is not an overscanned row)\r\n                              style        // Style object to be applied to row (to position it)\r\n                          }) => {\r\n        const i = rowIndex * this.cols + columnIndex;\r\n        const img = this.props.images[i];\r\n        if (!img) return null;\r\n        return <Image key={img.index} {...img} style={style} {...(!img.blob ? {deferSource:this.props.onRender} : {})} />\r\n    };\r\n\r\n    render() {\r\n        if (this.props.images.length === 0) {\r\n            return this.props.children || null;\r\n        }\r\n        return (\r\n            <AutoSizer>\r\n                {({height, width}) => {\r\n                   if (width === 0) return null;\r\n                    this.cols = Math.floor(width / this.CELL_WIDTH);\r\n                    this.rows = Math.ceil(this.props.images.length / this.cols);\r\n\r\n                    return (\r\n                        <Grid\r\n                            key={`${this.props.images.length}`}\r\n                            cellRenderer={this.cellRenderer}\r\n                            width={width}\r\n                            height={height}\r\n                            columnCount={this.cols}\r\n                            columnWidth={this.CELL_WIDTH}\r\n                            rowCount={this.rows}\r\n                            rowHeight={this.CELL_HEIGHT}\r\n                        />\r\n                    )\r\n                }}\r\n            </AutoSizer>\r\n        );\r\n    }\r\n}","import React from 'react';\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nclass Sidebar extends React.Component {\r\n    render() {\r\n        return (\r\n            <nav className=\"section-nav\">\r\n                <ul>\r\n                    <li><NavLink to=\"/bmps\">BMPs</NavLink></li>\r\n                    <li><NavLink to=\"/grhs\">GRHs</NavLink></li>\r\n                    <li><NavLink to=\"/objs\">OBJs</NavLink></li>\r\n                </ul>\r\n            </nav>\r\n        );\r\n    }\r\n}\r\n\r\nexport default Sidebar;","/**\r\n * Simple wrapper around DataView functions.\r\n * VB6 -> Javascript\r\n * Byte -> get8\r\n * Integer -> get16\r\n * Long -> get32\r\n * Single -> get32float\r\n */\r\nexport default class BinaryReader {\r\n    endian = true;\r\n    offset = 0;\r\n\r\n    constructor(arrayBuffer) {\r\n        this.dv = new DataView(arrayBuffer);\r\n    }\r\n\r\n    read32 = () => {\r\n        const ret = this.dv.getInt32(this.offset, this.endian);\r\n        this.offset += 4;\r\n        return ret;\r\n    };\r\n    read16 = () => {\r\n        const ret = this.dv.getInt16(this.offset, this.endian);\r\n        this.offset += 2;\r\n        return ret;\r\n    };\r\n    read8 = () => {\r\n        const ret = this.dv.getInt8(this.offset);\r\n        this.offset += 1;\r\n        return ret;\r\n    };\r\n    read32float = () => {\r\n        const ret = this.dv.getFloat32(this.offset, this.endian);\r\n        this.offset += 4;\r\n        return ret;\r\n    };\r\n    readString = (length) => {\r\n        const buf = this.dv.buffer.slice(this.offset, this.offset + length);\r\n        const ret = String.fromCharCode.apply(null, new Uint8Array(buf));\r\n        this.offset += length;\r\n        return ret;\r\n    };\r\n    isEOF = () => this.offset >= this.dv.byteLength;\r\n}","import BinaryReader from \"./BinaryReader\";\r\n\r\nexport default (bin) => {\r\n    const br = new BinaryReader(bin);\r\n\r\n    // FileVersion\r\n    br.read32();\r\n\r\n    const grhCount = br.read32();\r\n    const grhs = [];\r\n    while (!br.isEOF()) {\r\n        const grh = {\r\n            index: 0,\r\n            numFrames: 0,\r\n            frames: [],\r\n            speed: 0,\r\n            x: 0,\r\n            y: 0,\r\n            w: 0,\r\n            h: 0,\r\n            fileNum: 0,\r\n        };\r\n        grh.index = br.read32();\r\n        grh.numFrames = br.read16();\r\n        if (grh.numFrames > 1) {\r\n            for (let frame = 0; frame < grh.numFrames; frame++) {\r\n                grh.frames[frame] = br.read32();\r\n            }\r\n            grh.speed = br.read32float();\r\n        } else {\r\n            grh.fileNum = br.read32();\r\n            grh.x = br.read16();\r\n            grh.y = br.read16();\r\n            grh.w = br.read16();\r\n            grh.h = br.read16();\r\n            grh.frames[0] = grh.index;\r\n        }\r\n        grhs.push(grh);\r\n    }\r\n    return grhs;\r\n}","import BinaryReader from \"./BinaryReader\";\r\n\r\nexport default (bin) => {\r\n    const MaxGrhs = 15000;\r\n    const br = new BinaryReader(bin);\r\n\r\n    // MiCabecera\r\n    const desc = br.readString(255);\r\n    const crc = br.read32();\r\n    const magicWord = br.read32();\r\n\r\n    // TempInt\r\n    br.read16();\r\n    br.read16();\r\n    br.read16();\r\n    br.read16();\r\n    br.read16();\r\n\r\n    const grhCount = br.read32();\r\n    const grhs = new Array(MaxGrhs);\r\n    while (!br.isEOF()) {\r\n        const grh = {\r\n            index: 0,\r\n            numFrames: 0,\r\n            frames: [],\r\n            speed: 0,\r\n            x: 0,\r\n            y: 0,\r\n            w: 0,\r\n            h: 0,\r\n            fileNum: 0,\r\n        };\r\n        grh.index = br.read16();\r\n        grh.numFrames = br.read16();\r\n        if (grh.numFrames > 1) {\r\n            for (let frame = 0; frame < grh.numFrames; frame++) {\r\n                grh.frames[frame] = br.read16();\r\n            }\r\n            grh.speed = br.read16();\r\n        } else {\r\n            grh.fileNum = br.read16();\r\n            grh.x = br.read16();\r\n            grh.y = br.read16();\r\n            grh.w = br.read16();\r\n            grh.h = br.read16();\r\n            grh.frames[0] = grh.index;\r\n        }\r\n        grhs[grh.index] = grh;\r\n    }\r\n    // Second pass to add w/h to animated\r\n\r\n    let missing = 0;\r\n    grhs.forEach(grh => {\r\n        if (grh.numFrames > 1) {\r\n            const frame0grh = grhs[grh.frames[0]];\r\n            // const frame0grh = grhs.find(value => value.index === grh.frames[0]);\r\n            if (!frame0grh) {\r\n                missing++;\r\n                console.warn(`${grh.frames[0]} GRH doesn't exist, needed for GRH ${grh.index}`)\r\n            } else {\r\n                grh.w = frame0grh.w;\r\n                grh.h = frame0grh.h;\r\n            }\r\n        }\r\n    });\r\n    // console.log(missing);\r\n    return grhs;\r\n}\r\n","import ini from \"ini\";\r\n\r\nexport default (dat) => {\r\n    return Object.entries(ini.parse(dat))\r\n        .filter(([key, value]) => !key.startsWith(\"'\") && value.Name)\r\n        .reduce((acc, [key, value]) => ({...acc, [key]: value}), {});\r\n}","import React from 'react';\r\nimport Container from \"./Container\";\r\nimport ImageBrowser from \"./browser/ImageBrowser\";\r\nimport Sidebar from './Sidebar';\r\nimport './index.css';\r\nimport {HashRouter as Router, Redirect, Route, Switch} from 'react-router-dom';\r\nimport parseInd15 from \"./engine/parseInd15\";\r\nimport parseInd13 from \"./engine/parseInd13\";\r\nimport parseDat from \"./engine/parseDat\";\r\n\r\nclass App extends React.Component {\r\n    state = {\r\n        images: [],\r\n        filteredImages: [],\r\n        grhs: [],\r\n        filteredGrhs: [],\r\n        objs: [],\r\n        filteredObjs: [],\r\n        imageElements: [],\r\n        search: '',\r\n    };\r\n\r\n    canvas = document.createElement('canvas');\r\n    ctx = this.canvas.getContext('2d');\r\n    notFoundImage = null;\r\n    notFoundGrh = null;\r\n    cachedGrhs = [];\r\n    cachedImageElements = [];\r\n    cachedDats = {};\r\n\r\n    handleImages = (droppedImages) => {\r\n        const a = this.state.images.reduce((acc, cur) => ({...acc, [cur.filename]: cur}), {});\r\n        const b = droppedImages.reduce((acc, cur) => ({...acc, [cur.filename]: cur}), {});\r\n        const merged = {...a, ...b};\r\n        const images = Object.values(merged);\r\n        this.setState({images});\r\n    };\r\n\r\n    handleInd = (droppedInd) => {\r\n        //this.setState({grhs: droppedInd});\r\n        this.canvas.width = 64;\r\n        this.canvas.height = 64;\r\n        // console.log(\"read ind\");\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n            try {\r\n                this.cachedGrhs = parseInd15(reader.result);\r\n            }\r\n            catch (e) {\r\n                console.error(e);\r\n                this.cachedGrhs = parseInd13(reader.result);\r\n            }\r\n            const grhs = this.cachedGrhs.map(value => (\r\n                {\r\n                    blob: '',\r\n                    filename: value.index + '',\r\n                    w: value.w,\r\n                    h: value.h,\r\n                    index: value.index,\r\n                }\r\n            )).filter(value => value);\r\n            // console.dir(grhs);\r\n            this.setState({grhs});\r\n            // console.log(\"create imgs \" + grhs.length);\r\n        };\r\n        reader.readAsArrayBuffer(droppedInd);\r\n    };\r\n\r\n    handleDat = (droppedDat) => {\r\n        const reader = new FileReader();\r\n        reader.onload = () => {\r\n            this.cachedDats = parseDat(reader.result);\r\n            const objs = Object.entries(this.cachedDats).map(([key, value]) => {\r\n                const grh = this.state.grhs.find(grh => grh.index === value.GrhIndex) || {blob: '', w: 64, h: 64};\r\n                return {\r\n                    blob: grh.blob,\r\n                    filename: value.Name,\r\n                    w: grh.w,\r\n                    h: grh.h,\r\n                    index: +key.substr(3),\r\n                }\r\n            });\r\n            this.setState({objs});\r\n        };\r\n        reader.readAsText(droppedDat);\r\n    };\r\n\r\n    drawGrhOnImage = (imageElement, grh) => {\r\n        // console.log(\"rendering...\", imageElement, grh);\r\n        return new Promise((resolve, reject) => {\r\n\r\n            const w = grh.w;\r\n            const h = grh.h;\r\n            this.canvas.width = w;\r\n            this.canvas.height = h;\r\n            this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n            this.ctx.drawImage(imageElement, grh.x, grh.y, w, h, 0, 0, this.canvas.width, this.canvas.height);\r\n\r\n            this.canvas.toBlob((blob) => {\r\n                if (!blob) {\r\n                    console.error(\"BLOB NULL\", grh);\r\n                    reject();\r\n                }\r\n                const blobUrl = URL.createObjectURL(blob);\r\n                const clone = this.state.grhs.map(value => value.index === grh.index ? {\r\n                    ...value,\r\n                    blob: blobUrl\r\n                } : value);\r\n                this.setState({grhs: clone});\r\n                return resolve(blobUrl);\r\n            });\r\n        });\r\n    };\r\n\r\n    onRenderGrh = (grhRenderedIndex) => {\r\n        // console.log(\"trying \", grhRendered);\r\n        const cachedGrh = this.cachedGrhs[grhRenderedIndex];\r\n        if (!cachedGrh) {\r\n            return new Promise(resolve => resolve(this.notFoundGrh));\r\n        }\r\n        return new Promise(async (resolve) => {\r\n            // console.log(\"not cached \", cachedGrh);\r\n            const bitmap = this.state.images.find(value => value.index === (cachedGrh.fileNum || cachedGrh.frames[0]));\r\n            if (!bitmap || cachedGrh.w === 0 || cachedGrh.h === 0) {\r\n                console.error(\"Falta el bitmap \" + (cachedGrh.fileNum || cachedGrh.frames[0]));\r\n                resolve(this.notFoundImage);\r\n            } else {\r\n                if (!this.cachedImageElements[bitmap.index]) {\r\n                    // console.log(\"not cached, creating new image ...\", cachedGrh, bitmap);\r\n                    const imageElement = new Image();\r\n                    this.cachedImageElements[bitmap.index] = imageElement;\r\n                    imageElement.onload = async () => {\r\n                        const blob = await this.drawGrhOnImage(imageElement, cachedGrh);\r\n                        resolve(blob);\r\n                    };\r\n                    imageElement.src = bitmap.blob;\r\n                } else {\r\n                    // cached image element\r\n                    const imageElement = this.cachedImageElements[bitmap.index];\r\n                    if (imageElement.complete) {\r\n                        // console.log(\"cached and rendered ...\", cachedGrh, bitmap);\r\n                        const blob = await this.drawGrhOnImage(imageElement, cachedGrh);\r\n                        resolve(blob);\r\n\r\n                    } else {\r\n                        // console.log(\"cached and not rendered ...\", cachedGrh, bitmap);\r\n                        const handleRendered = async () => {\r\n                            // console.log(\"rendering after rendered\", cachedGrh, bitmap);\r\n                            imageElement.removeEventListener('load', handleRendered);\r\n                            this.drawGrhOnImage(imageElement, cachedGrh);\r\n                            const blob = await this.drawGrhOnImage(imageElement, cachedGrh);\r\n                            resolve(blob);\r\n                        };\r\n                        imageElement.addEventListener('load', handleRendered);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n    };\r\n\r\n    onRenderObj = (objRenderedIndex) => {\r\n        const cachedDat = Object.entries(this.cachedDats).find(([key]) => key.endsWith(objRenderedIndex.toString()))[1];\r\n        return this.onRenderGrh(cachedDat.GrhIndex);\r\n    };\r\n\r\n    constructor() {\r\n        super();\r\n\r\n        // Generate graphic not found\r\n        this.canvas.width = 64;\r\n        this.canvas.height = 64;\r\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n        this.ctx.fillStyle = 'red';\r\n        this.ctx.fillRect(0, 0, 64, 64);\r\n        this.ctx.fillStyle = 'black';\r\n        this.ctx.textBaseline = \"middle\";\r\n        this.ctx.textAlign = \"center\";\r\n        this.ctx.fillText(\"FALTA BMP\", 32, 32, 64);\r\n        this.canvas.toBlob((blob) => {\r\n            this.notFoundImage = URL.createObjectURL(blob);\r\n            const img = new Image();\r\n            document.body.appendChild(img);\r\n            img.src = this.notFoundImage;\r\n        });\r\n\r\n        // Generate grh not found\r\n        this.canvas.width = 64;\r\n        this.canvas.height = 64;\r\n        this.ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\r\n        this.ctx.fillStyle = 'blue';\r\n        this.ctx.fillRect(0, 0, 64, 64);\r\n        this.ctx.fillStyle = 'black';\r\n        this.ctx.textBaseline = \"middle\";\r\n        this.ctx.textAlign = \"center\";\r\n        this.ctx.fillText(\"FALTA GRH\", 32, 32, 64);\r\n        this.canvas.toBlob((blob) => {\r\n            this.notFoundGrh = URL.createObjectURL(blob);\r\n            const img = new Image();\r\n            document.body.appendChild(img);\r\n            img.src = this.notFoundGrh;\r\n        });\r\n    }\r\n\r\n    handleChangeSearch = (ev) => {\r\n        this.setState({search: ev.target.value});\r\n    };\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (\r\n            this.state.images !== prevState.images ||\r\n            this.state.grhs !== prevState.grhs ||\r\n            this.state.objs !== prevState.objs ||\r\n            this.state.search !== prevState.search\r\n        ) {\r\n            // filter\r\n            const filteredImages = this.state.images.filter((value) => value.filename.toUpperCase().includes(this.state.search.toUpperCase()));\r\n            this.setState({filteredImages});\r\n            const filteredGrhs = this.state.grhs.filter((value) => value.filename.toUpperCase().includes(this.state.search.toUpperCase()));\r\n            this.setState({filteredGrhs});\r\n            // const filteredObjs = this.state.objs;\r\n            const filteredObjs = this.state.objs.filter((value) => value.filename.toUpperCase().includes(this.state.search.toUpperCase()));\r\n            this.setState({filteredObjs});\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <Router>\r\n                <React.Fragment>\r\n                    <Sidebar/>\r\n                    <div className=\"section-content\">\r\n                        <Route exact path=\"/\" component={() => <Redirect to=\"/bmps\"/>}/>\r\n                        <input placeholder=\"Buscar...\" style={{width: 200, height: 20}}\r\n                               onChange={this.handleChangeSearch}/>\r\n                        <div style={{width: '100%', height: 'calc(100% - 20px)'}}>\r\n                            <Switch>\r\n                                <Route path=\"/bmps\" render={() =>\r\n                                    <ImageBrowser images={this.state.filteredImages} key=\"images\">\r\n                                        Arrastra aca tus archivos .BMP o .PNG\r\n                                    </ImageBrowser>}/>\r\n                                <Route path=\"/grhs\" render={() =>\r\n                                    <ImageBrowser images={this.state.filteredGrhs} key=\"grhs\"\r\n                                                  onRender={this.onRenderGrh}>\r\n                                        Arrastra aca tu archivo Graficos.ind\r\n                                    </ImageBrowser>}/>\r\n                                <Route path=\"/objs\" render={() =>\r\n                                    <ImageBrowser images={this.state.filteredObjs} key=\"objs\"\r\n                                                  onRender={this.onRenderObj}>\r\n                                        Arrastra aca tu archivo OBJ.dat\r\n                                    </ImageBrowser>}/>\r\n                            </Switch>\r\n                        </div>\r\n                    </div>\r\n                    <Container onImages={this.handleImages} onInd={this.handleInd} onDat={this.handleDat}/>\r\n                </React.Fragment>\r\n            </Router>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          );\n        });\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.');\n\n              // Execute callback\n              if (config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.register();\n"],"sourceRoot":""}